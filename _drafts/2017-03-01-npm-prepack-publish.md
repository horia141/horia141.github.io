---
published: false
---
The other day I published a small package to [GitHub](https://github.com/horia141/npm-prepack-publish) and [NPM][https://www.npmjs.com/package/npm-prepack-publish]. This post serves as documentation and tutorial.

I wanted to have better control over what files are included into an NPM package. The classical approach to building a package is to call [`npm pack`](https://docs.npmjs.com/cli/pack). This includes files from the current directory, and is controlled by the [`files`](https://docs.npmjs.com/files/package.json#files) field in `package.json`. My main goal was to make imports be super easy. But many times the structure of the current directory and the simplicity of `npm pack` caused issues.

For example, a common directory structure I use is:

```
- package.json
- README.md
- src
  - index.ts
  - dependency.ts
- out # generated by the build process
  - index.d.ts
  - index.js
  - dependency.d.ts
  - dependency.js
```

The `out` directory is generated by the build process, while the other files are under source control. Naturally, I want the `.js` files and TypeScript definition files to make it into the package. Ideally, users would be able to work with it like:

```
import { foo } from 'my-package'
import { bar } from 'my-package/dependency'
```

The 